"use strict";var switchModule=angular.module("pasik.widgets.switch",[]);switchModule.controller("SwitchController",[function(){this.state="on",this.toggleState=function(t,r){return function(){"on"===this.state?(console.log("switch off"),this.state="off",r()):(console.log("switch on"),this.state="on",t())}}}]),switchModule.directive("switch",function(){return{restrict:"E",controller:"SwitchController",scope:{on:"&",off:"&"},templateUrl:"templates/widgets/switch.html",link:function(t,r,e,a){t.state=a.state,t.toggle=a.toggleState(t.on,t.off)}}});var pieChart=angular.module("pasik.charts.pieChart",[]);pieChart.controller("PieChartController",[function(){function t(t){var r=d3.interpolate(this._current,t);return this._current=r(0),function(t){return i(r(t))}}var r,e,a,n,i,o;this.slices=[],this.addSlice=function(t){this.slices.push(t)},this.initChart=function(t){r=e=52,a=26,o=d3.select(t[0]).append("svg").attr("width",r).attr("height",e).append("g").attr("class","pie-chart").attr("transform","translate("+r/2+","+e/2+")"),n=d3.layout.pie().value(function(t){return t}).sort(null),i=d3.svg.arc().outerRadius(a),o.selectAll(".slice").data(n(this.slices.map(function(t){return t.value}))).enter().append("g").attr("class","slice").append("path").attr("d",i).each(function(t){this._current=t})},this.redraw=function(){o.selectAll(".slice path").data(n(this.slices.map(function(t){return t.value}))).transition().duration(750).attrTween("d",t)}}]),pieChart.directive("pieChart",function(){return{restrict:"AE",replace:!0,controller:"PieChartController",link:function(t,r,e,a){a.initChart(r)}}}),pieChart.directive("slice",function(){return{require:"^pieChart",restrict:"AE",scope:{value:"="},link:function(t,r,e,a){t.$watch("value",function(){a.redraw()}),a.addSlice(t)}}});var barChart=angular.module("pasik.charts.barChart",[]);barChart.controller("BarChartController",function(){function t(t){t.enter().append("rect").attr("class","bar").attr("x",function(t,r){return r*(h+1)}).attr("y",function(t){return s-u(t)}).attr("height",function(t){return u(t)}).attr("width",c)}function r(t){t.transition().duration(1e3).attr("x",function(t,r){return r*h})}function e(t){t.exit().transition().duration(1e3).attr("x",-1*h).remove()}var a,n,i,o,s,c,l,h,u;this.setupChart=function(t){n=t.element,i=t.dataset,o=t.width,s=t.height,c=t.barWidth,l=t.padding,h=c+l,u=d3.scale.linear().domain([0,10]).rangeRound([0,s]),a=d3.select(n).append("svg").attr("class","bar-chart").attr("width",o).attr("height",s).append("g"),a.selectAll("rect").data(i,function(t){return t}).enter().append("rect").attr("class","bar").attr("x",function(t,r){return r*h}).attr("y",function(t){return s-u(t)}).attr("width",c).attr("height",function(t){return u(t)})},this.rerender=function(n){var i=a.selectAll("rect").data(n,function(t){return t});t(i),r(i),e(i)}}),barChart.directive("barChart",function(){return{restrict:"E",controller:"BarChartController",scope:{width:"=",height:"=",barWidth:"=",padding:"=",dataset:"=bind"},link:function(t,r,e,a){a.setupChart({element:r[0],width:t.width,height:t.height,barWidth:t.barWidth,padding:t.padding,dataset:t.dataset}),t.$watch("dataset",function(){a.rerender(t.dataset)},!0)}}}),angular.module("pasikApp",["pasik.charts.pieChart","pasik.charts.barChart","pasik.widgets.switch"]).config(["$routeProvider",function(t){t.when("/",{templateUrl:"views/main.html",controller:"MainCtrl"}).otherwise({redirectTo:"/"})}]),angular.module("pasikApp").controller("MainCtrl",["$scope","$timeout",function(t,r){function e(){r(function e(){t.foo=Math.round(80*Math.random()+10),t.bar=Math.round(80*Math.random()+10),t.first=(80*Math.random()+10).toPrecision(4),t.second=(80*Math.random()+10).toPrecision(4),"started"===t.state&&r(e,5e3)},3e3),r(function a(){t.dataset.shift(),t.dataset.push(10*Math.random()),"started"===t.state&&r(a,1e3)},1e3)}t.state="started",t.foo=87,t.bar=21,t.first=57.76,t.second=-3.76,t.dataset=[4.1,7.2,8.3,7.4,1.5,2.6,7.7,9.8,8.9,7,5.1,3.2,4.3,3.4,7.5,8.6,1.7,7.8,3.9,5],t.start=function(){e(),t.state="started"},t.stop=function(){t.state="stopped"},e()}]);