"use strict";var switchModule=angular.module("pasik.widgets.switch",[]);switchModule.controller("SwitchController",[function(){this.state="on",this.toggleState=function(){"on"===this.state?(console.log("switch on"),this.state="off"):(console.log("switch on"),this.state="on")}}]),switchModule.directive("switch",function(){return{restrict:"E",controller:"SwitchController",scope:{},templateUrl:"templates/widgets/switch.html",link:function(t,r,e,a){t.state=a.state,t.toggle=a.toggleState}}});var pieChart=angular.module("pasik.charts.pieChart",[]);pieChart.controller("PieChartController",[function(){var t,r,e,a,n,i;this.slices=[],this.addSlice=function(t){this.slices.push(t)},this.initChart=function(o){t=r=26,e=13,i=d3.select(o[0]).append("svg").attr("width",t).attr("height",r).append("g").attr("class","pie-chart").attr("transform","translate(13, 13)"),a=d3.layout.pie().value(function(t){return t}).sort(null),n=d3.svg.arc().outerRadius(e),i.selectAll(".slice").data(a(this.slices.map(function(t){return t.value}))).enter().append("g").attr("class","slice").append("path").attr("d",n)},this.redraw=function(){i.selectAll(".slice path").data(a(this.slices.map(function(t){return t.value}))).attr("d",n)}}]),pieChart.directive("pieChart",function(){return{restrict:"AE",replace:!0,controller:"PieChartController",link:function(t,r,e,a){a.initChart(r)}}}),pieChart.directive("slice",function(){return{require:"^pieChart",restrict:"AE",scope:{value:"="},link:function(t,r,e,a){t.$watch("value",function(){a.redraw()}),a.addSlice(t)}}});var barChart=angular.module("pasik.charts.barChart",[]);barChart.controller("BarChartController",function(){function t(t){t.enter().append("rect").attr("class","bar").attr("x",function(t,r){return r*(h+1)}).attr("y",function(t){return s-u(t)}).attr("height",function(t){return u(t)}).attr("width",c)}function r(t){t.transition().duration(1e3).attr("x",function(t,r){return r*h})}function e(t){t.exit().transition().duration(1e3).attr("x",-1*h).remove()}var a,n,i,o,s,c,l,h,u;this.setupChart=function(t){n=t.element,i=t.dataset,o=t.width,s=t.height,c=t.barWidth,l=t.padding,h=c+l,u=d3.scale.linear().domain([0,10]).rangeRound([0,s]),a=d3.select(n).append("svg").attr("class","bar-chart").attr("width",o).attr("height",s).append("g"),a.selectAll("rect").data(i,function(t){return t}).enter().append("rect").attr("class","bar").attr("x",function(t,r){return r*h}).attr("y",function(t){return s-u(t)}).attr("width",c).attr("height",function(t){return u(t)})},this.rerender=function(n){var i=a.selectAll("rect").data(n,function(t){return t});t(i),r(i),e(i)}}),barChart.directive("barChart",function(){return{restrict:"E",controller:"BarChartController",scope:{width:"=",height:"=",barWidth:"=",padding:"=",dataset:"=bind"},link:function(t,r,e,a){a.setupChart({element:r[0],width:t.width,height:t.height,barWidth:t.barWidth,padding:t.padding,dataset:t.dataset}),t.$watch("dataset",function(){a.rerender(t.dataset)},!0)}}}),angular.module("pasikApp",["pasik.charts.pieChart","pasik.charts.barChart","pasik.widgets.switch"]).config(["$routeProvider",function(t){t.when("/",{templateUrl:"views/main.html",controller:"MainCtrl"}).otherwise({redirectTo:"/"})}]),angular.module("pasikApp").controller("MainCtrl",["$scope","$timeout",function(t,r){t.foo=87,t.bar=21,t.first=57.76,t.second=-3.76,t.dataset=[4.1,7.2,8.3,7.4,1.5,2.6,7.7,9.8,8.9,7,5.1,3.2,4.3,3.4,7.5,8.6,1.7,7.8,3.9,5],r(function e(){t.foo=Math.round(80*Math.random()+10),t.bar=Math.round(80*Math.random()+10),t.first=(80*Math.random()+10).toPrecision(4),t.second=(80*Math.random()+10).toPrecision(4),r(e,5e3)},5e3),r(function a(){t.dataset.shift(),t.dataset.push(10*Math.random()),r(a,1e3)},1e3)}]);